<?xml version="1.0"?>
<launch>
  <arg name="namespace" default="/" />
  <arg name="robot_name" default="hsrb" />

  <arg name="tf_prefix" value=""
       if="$(eval namespace == '/' or namespace == '')" />
  <arg name="tf_prefix" value="$(arg namespace)/"
       if="$(eval namespace != '/' and namespace != '')" />
  <group ns="$(arg namespace)">
    <node pkg="hsrb_impedance_control"
          name="impedance_control"
          type="hsrb_impedance_control_node">
<!--
          output="screen">
-->
      <remap from="~wrench_state" to="wrist_wrench/compensated"/>
      <remap from="~configuration_names" to="~config_names"/>
      <remap from="~robot_description" to="$(arg namespace)/robot_description"/>

      <param name="base_frame_id" value="$(arg tf_prefix)odom"/>
      <param name="robot_frame_id" value="$(arg tf_prefix)base_link"/>
      <param name="control_rate" value="50.0"/>
      <param name="command_duration" value="0.3"/>
      <rosparam command="load"
                file="$(find hsrb_impedance_control)/launch/configurations.yaml"/>
      <rosparam subst_value="true">
        origin_frame_id: "$(arg tf_prefix)odom"
        target_frame_id: "$(arg tf_prefix)hand_palm_link"
        sensor_frame_id: "$(arg tf_prefix)wrist_ft_sensor_frame"
        control_configurations/settings:
          compliance_hard:
            model_coordinate:
              frame_id: "$(arg tf_prefix)base_link"
          compliance_middle:
            model_coordinate:
              frame_id: "$(arg tf_prefix)base_link"
          compliance_soft:
            model_coordinate:
              frame_id: "$(arg tf_prefix)base_link"
          dumper_hard:
            model_coordinate:
              frame_id: "$(arg tf_prefix)base_link"
          dumper_soft:
            model_coordinate:
              frame_id: "$(arg tf_prefix)base_link"
          grasping:
            model_coordinate:
              frame_id: "$(arg tf_prefix)hand_palm_link"
          placing:
            model_coordinate:
              frame_id: "$(arg tf_prefix)hand_palm_link"
      </rosparam>
    </node>
  </group>
</launch>
