#! /usr/bin/env bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

sudo cp $DIR/ntpdate.service /etc/systemd/system/
sudo cp $DIR/hero-roscore.service /etc/systemd/system/

sudo cp $DIR/hero-battery-conversion.service /etc/systemd/system/
sudo cp $DIR/hero-monitor.service /etc/systemd/system/
sudo cp $DIR/hero-start.service /etc/systemd/system/
sudo cp $DIR/hero-windows-speech.service /etc/systemd/system/

# Reload and enable
sudo systemctl daemon-reload

sudo systemctl stop docker.hsrb.robot.service
sudo systemctl stop docker.hsrb.monitor.service
sudo systemctl stop docker.hsrb.roscore.service

sudo systemctl disable docker.hsrb.robot.service
sudo systemctl disable docker.hsrb.monitor.service
sudo systemctl disable docker.hsrb.roscore.service

sudo systemctl start ntpdate.service
sudo systemctl start hero-roscore.service

sudo systemctl start hero-battery-conversion.service
sudo systemctl start hero-monitor.service
# sudo systemctl start hero-start.service
sudo systemctl start hero-windows-speech.service

sudo systemctl enable ntpdate.service
sudo systemctl enable hero-roscore.service

sudo systemctl enable hero-battery-conversion.service
sudo systemctl enable hero-monitor.service
# sudo systemctl enable hero-start.service
sudo systemctl enable hero-windows-speech.service

echo "Check the journal for the log"
echo "sudo journalctl -fu [job_name, e.g. hero-monitor, hero-start]"
